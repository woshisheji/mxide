171000程序集名备注10|41|2-3-4
170100地图配置表

231000子程序名返回值类型异步公开备注10|10|4|4|41|2|3|4|5-6
230100地图表加载
Sql = 数据配置.加载地图
ret = 数据库执行取ID(Sql, 1, 1)
let 地图对象 = 数据Json字符串到对象(ret)
!!如果(地图对象.errcode != 200)
返回(0)
""如果结束()
 // 初始化加载，要存到全局对象管理，用于下发给客户端的
系统配置.地图配置 = 地图对象.data
 // 同步地图阻挡数据
!!数组循环(系统配置.地图配置, i)
 // 注：与易语言不同的是 数组从0成员开始
let map = 服务端读入文件Utf("/map/" + 系统配置.地图配置[i].图片资源 + "/ini/chck.json")
 // 
map = 数据Json字符串到对象(map)
 // 首次加载地图配置信息
系统配置.地图配置.阻挡 = map.mask
系统配置.地图配置.格子x = map.zdx
系统配置.地图配置.格子y = map.zdy
 // 
服务端调试输出("加载地图阻挡:" + i + "-" + map.zdx + " " + map.zdy)

""数组循环结束()


231000子程序名返回值类型异步公开备注10|10|4|4|6|121|2|3|4|5-6
230100地图表查找地图配置表地图系统数据 0失败
241100参数名类型备用可空初始值备注1|2|3|4|5|6
240000地图ID数值型地图ID
!!数组循环(系统配置.地图配置, i)
!!如果(系统配置.地图配置[i].id == 地图ID)
返回(系统配置.地图配置[i])
""如果结束()
""数组循环结束()
返回(0)
